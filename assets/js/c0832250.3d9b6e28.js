"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[7498],{6425:(n,r,e)=>{e.r(r),e.d(r,{assets:()=>c,contentTitle:()=>a,default:()=>u,frontMatter:()=>h,metadata:()=>t,toc:()=>s});const t=JSON.parse('{"id":"Development Core/SQL/MySql","title":"MySql","description":"---","source":"@site/docs/02_Development Core/SQL/MySql.md","sourceDirName":"02_Development Core/SQL","slug":"/Development Core/SQL/MySql","permalink":"/ecosys.documents/docs/Development Core/SQL/MySql","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"DBMS","permalink":"/ecosys.documents/docs/Development Core/SQL/DBMS"},"next":{"title":"NoSql","permalink":"/ecosys.documents/docs/Development Core/SQL/NoSql"}}');var i=e(4848),E=e(8453);const h={},a=void 0,c={},s=[];function o(n){const r={code:"code",hr:"hr",pre:"pre",...(0,E.R)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{children:'MYSQL \u2014 H\u1ec6 QU\u1ea2N TR\u1eca C\u01a0 S\u1ede D\u1eee LI\u1ec6U QUAN H\u1ec6 (RDBMS)\r\n\u2502\r\n\u251c\u2500\u2500\u2500 1. B\u1ea2N CH\u1ea4T T\u1ed4NG QU\xc1T\r\n\u2502    \u2502\r\n\u2502    \u251c\u2500\u2500\u2500 L\xe0 ph\u1ea7n m\u1ec1m DBMS (Database Management System)\r\n\u2502    \u251c\u2500\u2500\u2500 Tu\xe2n th\u1ee7 m\xf4 h\xecnh quan h\u1ec7 (Relational Model) c\u1ee7a E.F. Codd (1970)\r\n\u2502    \u251c\u2500\u2500\u2500 D\u1eef li\u1ec7u \u0111\u01b0\u1ee3c t\u1ed5 ch\u1ee9c th\xe0nh c\xe1c B\u1ea2NG (Table) \u2014 t\u1eadp h\u1ee3p c\xe1c M\u1ed0I QUAN H\u1ec6\r\n\u2502    \u251c\u2500\u2500\u2500 M\u1ed7i b\u1ea3ng = T\u1eadp h\u1ee3p c\xe1c H\xc0NG (Tuple/Record) v\xe0 C\u1ed8T (Attribute/Field)\r\n\u2502    \u2514\u2500\u2500\u2500 T\u1ea5t c\u1ea3 thao t\xe1c \u0111\u1ec1u d\u1ef1a tr\xean \u0110\u1ea0I S\u1ed0 QUAN H\u1ec6 (Relational Algebra) v\xe0 CALCULUS\r\n\u2502\r\n\u251c\u2500\u2500\u2500 2. M\xd4 H\xccNH D\u1eee LI\u1ec6U QUAN H\u1ec6 (RELATIONAL MODEL)\r\n\u2502    \u2502\r\n\u2502    \u251c\u2500\u2500\u2500 \ud83d\udccc B\u1ea2NG (Table)\r\n\u2502    \u2502    \u251c\u2500\u2500\u2500 L\xe0 t\u1eadp con c\u1ee7a t\xedch Descartes gi\u1eefa c\xe1c mi\u1ec1n gi\xe1 tr\u1ecb (domains)\r\n\u2502    \u2502    \u2514\u2500\u2500\u2500 Kh\xf4ng c\xf3 th\u1ee9 t\u1ef1 h\xe0ng \u2192 m\u1ed7i h\xe0ng l\xe0 m\u1ed9t t\u1eadp h\u1ee3p c\xe1c c\u1eb7p (t\xean_c\u1ed9t, gi\xe1_tr\u1ecb)\r\n\u2502    \u2502\r\n\u2502    \u251c\u2500\u2500\u2500 \ud83d\udccc KH\xd3A (Key)\r\n\u2502    \u2502    \u251c\u2500\u2500\u2500 Kh\xf3a ch\xednh (Primary Key): x\xe1c \u0111\u1ecbnh duy nh\u1ea5t m\u1ed9t h\xe0ng trong b\u1ea3ng\r\n\u2502    \u2502    \u2502    \u2514\u2500\u2500\u2500 Kh\xf4ng NULL, kh\xf4ng tr\xf9ng l\u1eb7p \u2192 \u0111\u1ea3m b\u1ea3o t\xednh to\xe0n v\u1eb9n th\u1ef1c th\u1ec3 (Entity Integrity)\r\n\u2502    \u2502    \u2502\r\n\u2502    \u2502    \u251c\u2500\u2500\u2500 Kh\xf3a ngo\u1ea1i (Foreign Key): tham chi\u1ebfu \u0111\u1ebfn PK c\u1ee7a b\u1ea3ng kh\xe1c\r\n\u2502    \u2502    \u2502    \u2514\u2500\u2500\u2500 \u0110\u1ea3m b\u1ea3o t\xednh to\xe0n v\u1eb9n tham chi\u1ebfu (Referential Integrity)\r\n\u2502    \u2502    \u2502\r\n\u2502    \u2502    \u2514\u2500\u2500\u2500 Kh\xf3a candidate: thu\u1ed9c t\xednh ho\u1eb7c t\u1eadp thu\u1ed9c t\xednh c\xf3 th\u1ec3 tr\u1edf th\xe0nh PK\r\n\u2502    \u2502\r\n\u2502    \u2514\u2500\u2500\u2500 \ud83d\udccc M\u1ed0I QUAN H\u1ec6 (Relationship)\r\n\u2502         \u251c\u2500\u2500\u2500 1:1, 1:N, N:M \u2192 bi\u1ec3u di\u1ec5n b\u1eb1ng FK + b\u1ea3ng trung gian (junction table)\r\n\u2502         \u2514\u2500\u2500\u2500 Kh\xf4ng d\xf9ng con tr\u1ecf v\u1eadt l\xfd \u2192 t\u1ea5t c\u1ea3 k\u1ebft n\u1ed1i l\xe0 LOGICAL th\xf4ng qua gi\xe1 tr\u1ecb kh\xf3a\r\n\u2502\r\n\u251c\u2500\u2500\u2500 3. NG\xd4N NG\u1eee SQL \u2014 L\u1edaP GIAO TI\u1ebeP V\u1edaI M\xd4 H\xccNH QUAN H\u1ec6\r\n\u2502    \u2502\r\n\u2502    \u251c\u2500\u2500\u2500 SQL = Structured Query Language \u2014 ng\xf4n ng\u1eef chu\u1ea9n ANSI/ISO\r\n\u2502    \u2502    \u251c\u2500\u2500\u2500 3 th\xe0nh ph\u1ea7n ch\xednh:\r\n\u2502    \u2502    \u2502\r\n\u2502    \u2502    \u251c\u2500\u2500\u2500 DDL (Data Definition Language) \u2014 \u0110\u1ecbnh ngh\u0129a c\u1ea5u tr\xfac\r\n\u2502    \u2502    \u2502    \u251c\u2500\u2500\u2500 CREATE TABLE \u2014 t\u1ea1o b\u1ea3ng, khai b\xe1o ki\u1ec3u, r\xe0ng bu\u1ed9c\r\n\u2502    \u2502    \u2502    \u251c\u2500\u2500\u2500 ALTER TABLE \u2014 s\u1eeda c\u1ea5u tr\xfac (th\xeam/x\xf3a c\u1ed9t, r\xe0ng bu\u1ed9c)\r\n\u2502    \u2502    \u2502    \u2514\u2500\u2500\u2500 DROP TABLE \u2014 x\xf3a ho\xe0n to\xe0n b\u1ea3ng (v\xe0 d\u1eef li\u1ec7u)\r\n\u2502    \u2502    \u2502\r\n\u2502    \u2502    \u251c\u2500\u2500\u2500 DML (Data Manipulation Language) \u2014 Thao t\xe1c d\u1eef li\u1ec7u\r\n\u2502    \u2502    \u2502    \u251c\u2500\u2500\u2500 SELECT \u2014 truy v\u1ea5n (ph\xe9p chi\u1ebfu \u03c0, ch\u1ecdn \u03c3, join \u22c8, union \u222a, difference \u2212)\r\n\u2502    \u2502    \u2502    \u251c\u2500\u2500\u2500 INSERT \u2014 ch\xe8n tuple m\u1edbi v\xe0o quan h\u1ec7\r\n\u2502    \u2502    \u2502    \u251c\u2500\u2500\u2500 UPDATE \u2014 s\u1eeda gi\xe1 tr\u1ecb c\xe1c thu\u1ed9c t\xednh trong tuple\r\n\u2502    \u2502    \u2502    \u2514\u2500\u2500\u2500 DELETE \u2014 lo\u1ea1i b\u1ecf tuple kh\u1ecfi quan h\u1ec7\r\n\u2502    \u2502    \u2502\r\n\u2502    \u2502    \u2514\u2500\u2500\u2500 DCL (Data Control Language) \u2014 Ki\u1ec3m so\xe1t truy c\u1eadp\r\n\u2502    \u2502         \u251c\u2500\u2500\u2500 GRANT / REVOKE \u2014 c\u1ea5p/ph\xea duy\u1ec7t quy\u1ec1n truy c\u1eadp\r\n\u2502    \u2502         \u2514\u2500\u2500\u2500 TRANSACTION CONTROL: BEGIN, COMMIT, ROLLBACK \u2014 \u0111\u1ea3m b\u1ea3o ACID\r\n\u2502    \u2502\r\n\u2502    \u2514\u2500\u2500\u2500 SQL l\xe0 ng\xf4n ng\u1eef DECLARATIVE \u2014 b\u1ea1n n\xf3i \u201cC\u1ea6N G\xcc\u201d, kh\xf4ng n\xf3i \u201cL\xc0M TH\u1ebe N\xc0O\u201d\r\n\u2502         \u2192 H\u1ec7 th\u1ed1ng t\u1ef1 sinh ra k\u1ebf ho\u1ea1ch truy v\u1ea5n (Query Plan) t\u1ed1i \u01b0u\r\n\u2502\r\n\u251c\u2500\u2500\u2500 4. C\u01a0 CH\u1ebe HO\u1ea0T \u0110\u1ed8NG N\u1ec0N T\u1ea2NG (PH\xcdA SAU SQL)\r\n\u2502    \u2502\r\n\u2502    \u251c\u2500\u2500\u2500 \ud83e\udde0 QUERY EXECUTION PIPELINE\r\n\u2502    \u2502    \u251c\u2500\u2500\u2500 1. Parser \u2014 Ph\xe2n t\xedch c\xfa ph\xe1p SQL \u2192 c\xe2y AST (Abstract Syntax Tree)\r\n\u2502    \u2502    \u251c\u2500\u2500\u2500 2. Optimizer \u2014 Ch\u1ecdn c\xe1ch th\u1ef1c thi hi\u1ec7u qu\u1ea3 nh\u1ea5t:\r\n\u2502    \u2502    \u2502    \u251c\u2500\u2500\u2500 Xem ch\u1ec9 m\u1ee5c (index) n\xe0o c\xf3 th\u1ec3 d\xf9ng\r\n\u2502    \u2502    \u2502    \u251c\u2500\u2500\u2500 T\u1ed1i \u01b0u th\u1ee9 t\u1ef1 JOIN (JOIN ordering)\r\n\u2502    \u2502    \u2502    \u2514\u2500\u2500\u2500 \u01af\u1edbc l\u01b0\u1ee3ng chi ph\xed (cost-based optimization)\r\n\u2502    \u2502    \u2514\u2500\u2500\u2500 3. Executor \u2014 Th\u1ef1c thi k\u1ebf ho\u1ea1ch \u2192 truy c\u1eadp storage engine\r\n\u2502    \u2502\r\n\u2502    \u251c\u2500\u2500\u2500 \ud83d\uddc3\ufe0f STORAGE ENGINE \u2014 L\u1edbp l\u01b0u tr\u1eef v\u1eadt l\xfd\r\n\u2502    \u2502    \u251c\u2500\u2500\u2500 InnoDB (m\u1eb7c \u0111\u1ecbnh t\u1eeb MySQL 5.5+)\r\n\u2502    \u2502    \u2502    \u251c\u2500\u2500\u2500 D\xf9ng B+Tree \u0111\u1ec3 l\u01b0u index & data (clustered index)\r\n\u2502    \u2502    \u2502    \u251c\u2500\u2500\u2500 H\u1ed7 tr\u1ee3 transaction \u2192 d\xf9ng WAL (Write-Ahead Logging)\r\n\u2502    \u2502    \u2502    \u251c\u2500\u2500\u2500 MVCC (Multi-Version Concurrency Control) \u2192 \u0111\u1ecdc kh\xf4ng ch\u1eb7n vi\u1ebft\r\n\u2502    \u2502    \u2502    \u2514\u2500\u2500\u2500 D\xf9ng undo log \u0111\u1ec3 rollback, redo log \u0111\u1ec3 crash recovery\r\n\u2502    \u2502    \u2502\r\n\u2502    \u2502    \u2514\u2500\u2500\u2500 MyISAM (c\u0169, kh\xf4ng h\u1ed7 tr\u1ee3 transaction)\r\n\u2502    \u2502         \u251c\u2500\u2500\u2500 D\xf9ng HEAP + B-Tree\r\n\u2502    \u2502         \u2514\u2500\u2500\u2500 Lock c\u1ea5p b\u1ea3ng (table-level locking) \u2192 kh\xf4ng ph\xf9 h\u1ee3p write-heavy\r\n\u2502    \u2502\r\n\u2502    \u2514\u2500\u2500\u2500 \ud83d\udd04 TRANSACTIONS & ACID\r\n\u2502         \u251c\u2500\u2500\u2500 Atomicity \u2014 To\xe0n b\u1ed9 giao d\u1ecbch ho\u1eb7c th\xe0nh c\xf4ng, ho\u1eb7c th\u1ea5t b\u1ea1i ho\xe0n to\xe0n\r\n\u2502         \u2502    \u2514\u2500\u2500\u2500 D\xf9ng UNDO LOG \u0111\u1ec3 kh\xf4i ph\u1ee5c tr\u1ea1ng th\xe1i tr\u01b0\u1edbc giao d\u1ecbch\r\n\u2502         \u2502\r\n\u2502         \u251c\u2500\u2500\u2500 Consistency \u2014 D\u1eef li\u1ec7u lu\xf4n \u1edf tr\u1ea1ng th\xe1i h\u1ee3p l\u1ec7 (r\xe0ng bu\u1ed9c, FK, check)\r\n\u2502         \u2502    \u2514\u2500\u2500\u2500 \u0110\u01b0\u1ee3c \u0111\u1ea3m b\u1ea3o b\u1edfi r\xe0ng bu\u1ed9c (constraints) do ng\u01b0\u1eddi d\xf9ng \u0111\u1ecbnh ngh\u0129a\r\n\u2502         \u2502\r\n\u2502         \u251c\u2500\u2500\u2500 Isolation \u2014 Giao d\u1ecbch ch\u1ea1y song song nh\u01b0ng kh\xf4ng \u1ea3nh h\u01b0\u1edfng l\u1eabn nhau\r\n\u2502         \u2502    \u2514\u2500\u2500\u2500 D\xf9ng m\u1ee9c c\xf4 l\u1eadp (isolation level):\r\n\u2502         \u2502         \u251c\u2500\u2500\u2500 READ UNCOMMITTED \u2192 dirty read\r\n\u2502         \u2502         \u251c\u2500\u2500\u2500 READ COMMITTED \u2192 non-repeatable read\r\n\u2502         \u2502         \u251c\u2500\u2500\u2500 REPEATABLE READ (m\u1eb7c \u0111\u1ecbnh MySQL) \u2192 phantom read b\u1ecb ng\u0103n\r\n\u2502         \u2502         \u2514\u2500\u2500\u2500 SERIALIZABLE \u2192 nghi\xeam ng\u1eb7t nh\u1ea5t, hi\u1ec7u n\u0103ng th\u1ea5p\r\n\u2502         \u2502\r\n\u2502         \u2514\u2500\u2500\u2500 Durability \u2014 Sau khi COMMIT, d\u1eef li\u1ec7u kh\xf4ng m\u1ea5t d\xf9 h\u1ec7 th\u1ed1ng s\u1eadp\r\n\u2502              \u2514\u2500\u2500\u2500 D\xf9ng REDO LOG (ghi tr\u01b0\u1edbc l\xean \u0111\u0129a) \u2192 ph\u1ee5c h\u1ed3i sau crash\r\n\u2502\r\n\u251c\u2500\u2500\u2500 5. T\xcdNH TO\xc1N QUAN H\u1ec6 \u2014 NH\u1eeeNG PH\xc9P TO\xc1N C\u01a0 B\u1ea2N\r\n\u2502    \u2502\r\n\u2502    \u251c\u2500\u2500\u2500 SELECTION (\u03c3) \u2014 l\u1ecdc h\xe0ng theo \u0111i\u1ec1u ki\u1ec7n\r\n\u2502    \u2502    \u2514\u2500\u2500\u2500 T\u01b0\u01a1ng \u0111\u01b0\u01a1ng: WHERE age > 18\r\n\u2502    \u2502\r\n\u2502    \u251c\u2500\u2500\u2500 PROJECTION (\u03c0) \u2014 l\u1ea5y m\u1ed9t s\u1ed1 c\u1ed9t\r\n\u2502    \u2502    \u2514\u2500\u2500\u2500 T\u01b0\u01a1ng \u0111\u01b0\u01a1ng: SELECT name, email FROM users\r\n\u2502    \u2502\r\n\u2502    \u251c\u2500\u2500\u2500 JOIN (\u22c8) \u2014 k\u1ebft h\u1ee3p hai b\u1ea3ng theo \u0111i\u1ec1u ki\u1ec7n\r\n\u2502    \u2502    \u251c\u2500\u2500\u2500 INNER JOIN: ch\u1ec9 gi\u1eef h\xe0ng c\xf3 match\r\n\u2502    \u2502    \u251c\u2500\u2500\u2500 LEFT JOIN: gi\u1eef t\u1ea5t c\u1ea3 h\xe0ng b\u1ea3ng tr\xe1i, th\xeam NULL n\u1ebfu kh\xf4ng match\r\n\u2502    \u2502    \u2514\u2500\u2500\u2500 CROSS JOIN: t\xedch Descartes (kh\xf4ng \u0111i\u1ec1u ki\u1ec7n)\r\n\u2502    \u2502\r\n\u2502    \u251c\u2500\u2500\u2500 UNION (\u222a), INTERSECT (\u2229), DIFFERENCE (\u2212) \u2014 ph\xe9p to\xe1n t\u1eadp h\u1ee3p\r\n\u2502    \u2502    \u2514\u2500\u2500\u2500 Hai b\u1ea3ng ph\u1ea3i c\xf9ng schema (s\u1ed1 c\u1ed9t, ki\u1ec3u d\u1eef li\u1ec7u t\u01b0\u01a1ng th\xedch)\r\n\u2502    \u2502\r\n\u2502    \u2514\u2500\u2500\u2500 DIVISION (\xf7) \u2014 hi\u1ebfm g\u1eb7p, d\xf9ng \u0111\u1ec3 t\xecm "t\u1ea5t c\u1ea3" (VD: kh\xe1ch h\xe0ng mua t\u1ea5t c\u1ea3 s\u1ea3n ph\u1ea9m)\r\n\u2502\r\n\u2514\u2500\u2500\u2500 6. T\xcdNH TO\xc0N V\u1eb8N D\u1eee LI\u1ec6U (INTEGRITY CONSTRAINTS)\r\n     \u2502\r\n     \u251c\u2500\u2500\u2500 PRIMARY KEY \u2014 \u0111\u1ea3m b\u1ea3o uniqueness + NOT NULL\r\n     \u251c\u2500\u2500\u2500 FOREIGN KEY \u2014 \u0111\u1ea3m b\u1ea3o tham chi\u1ebfu h\u1ee3p l\u1ec7 (referential integrity)\r\n     \u251c\u2500\u2500\u2500 UNIQUE \u2014 \u0111\u1ea3m b\u1ea3o kh\xf4ng tr\xf9ng gi\xe1 tr\u1ecb trong c\u1ed9t\r\n     \u251c\u2500\u2500\u2500 NOT NULL \u2014 b\u1eaft bu\u1ed9c c\xf3 gi\xe1 tr\u1ecb\r\n     \u251c\u2500\u2500\u2500 CHECK \u2014 r\xe0ng bu\u1ed9c \u0111i\u1ec1u ki\u1ec7n (VD: age >= 0)\r\n     \u2514\u2500\u2500\u2500 DEFAULT \u2014 gi\xe1 tr\u1ecb m\u1eb7c \u0111\u1ecbnh khi kh\xf4ng cung c\u1ea5p\n'})}),"\n",(0,i.jsx)(r.hr,{}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{children:'MYSQL \u2014 T\u01af\u01a0NG T\u1ef0 NH\u01af GAME BACKEND\r\n\u2502\r\n\u251c\u2500\u2500\u2500 B\u1ea2NG (Table)  \r\n\u2502    \u2514\u2500\u2500\u2500 L\xe0 m\u1ed9t m\u1ea3ng object: [{id:1,name:"Alice",level:25}, {id:2,name:"Bob",level:30}]  \r\n\u2502         \u2192 Kh\xf4ng ph\u1ea3i file, kh\xf4ng ph\u1ea3i Excel \u2014 m\xe0 l\xe0 "d\u1eef li\u1ec7u c\xf3 quy t\u1eafc"  \r\n\u2502         \u2192 M\u1ed7i d\xf2ng = 1 entity trong game: player, item, quest...  \r\n\u2502\r\n\u251c\u2500\u2500\u2500 SQL  \r\n\u2502    \u2514\u2500\u2500\u2500 B\u1ea1n kh\xf4ng vi\u1ebft code \u2014 b\u1ea1n h\u1ecfi:  \r\n\u2502         "Cho t\xf4i t\xean nh\u1eefng player level > 20"  \r\n\u2502         \u2192 H\u1ec7 th\u1ed1ng t\u1ef1 t\xecm c\xe1ch tr\u1ea3 l\u1eddi \u2014 kh\xf4ng c\u1ea7n loop, kh\xf4ng c\u1ea7n if  \r\n\u2502         \u2192 SELECT name FROM players WHERE level > 20  \r\n\u2502\r\n\u251c\u2500\u2500\u2500 FK (Kh\xf3a ngo\u1ea1i)  \r\n\u2502    \u2514\u2500\u2500\u2500 L\xe0 ID tr\u1ecf \u0111\u1ebfn PK c\u1ee7a b\u1ea3ng kh\xe1c \u2014 ch\u1ec9 \u0111\u01b0\u1ee3c tr\u1ecf v\xe0o ID  \r\n\u2502         \u2705 \u0110\xfang: weapon_id \u2192 REFERENCES weapons.id  \r\n\u2502         \u274c Sai: weapon_name \u2192 REFERENCES weapons.name  \r\n\u2502         \u2192 V\xec sao? C\xf3 5 thanh "Sword" \u2014 b\u1ea1n mu\u1ed1n trang b\u1ecb c\xe1i n\xe0o?  \r\n\u2502         \u2192 FK = "ch\u1ec9 \u0111\u01b0\u1eddng \u0111\u1ebfn \u0111\xfang v\u1eadt ph\u1ea9m" \u2014 kh\xf4ng \u0111\u1ec3 d\u1eef li\u1ec7u ma  \r\n\u2502\r\n\u251c\u2500\u2500\u2500 ACID \u2014 GIAO D\u1ecaCH AN TO\xc0N  \r\n\u2502    \u251c\u2500\u2500\u2500 A (Atomic): Ho\u1eb7c c\u1ea3 hai c\xf9ng th\xe0nh c\xf4ng \u2014 ho\u1eb7c c\xf9ng th\u1ea5t b\u1ea1i  \r\n\u2502    \u2502      (Alice m\u1ea5t 100 gold \u2192 Bob nh\u1eadn 100 gold)  \r\n\u2502    \u251c\u2500\u2500\u2500 C (Consistency): T\u1ed5ng gold trong h\u1ec7 th\u1ed1ng lu\xf4n \u0111\xfang  \r\n\u2502    \u251c\u2500\u2500\u2500 I (Isolation): 10k ng\u01b0\u1eddi ch\u01a1i giao d\u1ecbch c\xf9ng l\xfac \u2014 kh\xf4ng l\u1ed9n x\u1ed9n  \r\n\u2502    \u2514\u2500\u2500\u2500 D (Durability): Server s\u1eadp? Gold v\u1eabn c\xf2n \u2014 v\xec \u0111\xe3 ghi log tr\u01b0\u1edbc  \r\n\u2502\r\n\u251c\u2500\u2500\u2500 MVCC  \r\n\u2502    \u2514\u2500\u2500\u2500 Khi b\u1ea1n \u0111\u1ecdc danh s\xe1ch player \u2014 h\u1ec7 th\u1ed1ng kh\xf4ng lock  \r\n\u2502         \u2192 N\xf3 t\u1ea1o b\u1ea3n sao d\u1eef li\u1ec7u t\u1ea1i th\u1eddi \u0111i\u1ec3m b\u1ea1n b\u1eaft \u0111\u1ea7u  \r\n\u2502         \u2192 Ng\u01b0\u1eddi A \u0111\u1ecdc l\xfac 10:00:00 \u2192 th\u1ea5y level=20  \r\n\u2502         \u2192 Ng\u01b0\u1eddi B s\u1eeda level=30 l\xfac 10:00:01  \r\n\u2502         \u2192 Ng\u01b0\u1eddi A V\u1eaaN th\u1ea5y 20 \u2014 kh\xf4ng b\u1ecb nhi\u1ec5u  \r\n\u2502         \u2192 Gi\u1ea3i th\xedch v\xec sao leaderboard kh\xf4ng lag  \r\n\u2502\r\n\u251c\u2500\u2500\u2500 B+Tree (Index)  \r\n\u2502    \u2514\u2500\u2500\u2500 L\xe0 m\u1ee5c l\u1ee5c trong s\u1ed5 tay \u2014 gi\xfap t\xecm nhanh  \r\n\u2502         \ud83d\udd0d T\xecm id=100 \u2192 nhanh (O(log n))  \r\n\u2502         \ud83d\udd0d T\xecm level BETWEEN 20 AND 30 \u2192 NHANH H\u01a0N v\xec d\u1eef li\u1ec7u s\u1eafp x\u1ebfp theo th\u1ee9 t\u1ef1  \r\n\u2502         \ud83d\udeab Kh\xf4ng c\xf3 index? \u2192 Ph\u1ea3i qu\xe9t t\u1eebng h\xe0ng \u2192 ch\u1eadm nh\u01b0 t\u1ea3i phim 360p  \r\n\u2502\r\n\u251c\u2500\u2500\u2500 UNDO LOG  \r\n\u2502    \u2514\u2500\u2500\u2500 Ghi l\u1ea1i "tr\u01b0\u1edbc khi s\u1eeda" \u2014 \u0111\u1ec3 rollback d\u1ec5 d\xe0ng  \r\n\u2502         UPDATE player SET level=30 \u2192 Undo Log ghi: "tr\u01b0\u1edbc \u0111\xf3 level=25"  \r\n\u2502         \u2192 Rollback? D\xf9ng l\u1ea1i 25  \r\n\u2502         \u2192 C\u0169ng l\xe0 n\u1ec1n t\u1ea3ng cho MVCC \u2014 \u0111\u1ecdc phi\xean b\u1ea3n c\u0169  \r\n\u2502\r\n\u2514\u2500\u2500\u2500 REDO LOG  \r\n     \u2514\u2500\u2500\u2500 Ghi l\u1ea1i "t\xf4i \u0111\u1ecbnh l\xe0m g\xec" \u2014 NGAY TR\u01af\u1edaC khi ghi v\xe0o \u0111\u0129a  \r\n          UPDATE \u2192 ghi v\xe0o redo log \u2192 m\u1edbi ghi v\xe0o file  \r\n          \u2192 Server t\u1eaft? Kh\u1edfi \u0111\u1ed9ng l\u1ea1i \u2192 \u0111\u1ecdc redo log \u2192 l\xe0m l\u1ea1i m\u1ecdi vi\u1ec7c ch\u01b0a xong  \r\n          \u2192 KH\xd4NG C\u1ea6N BACKUP \u2014 ch\u1ec9 c\u1ea7n log n\xe0y l\xe0 c\u1ee9u \u0111\u01b0\u1ee3c d\u1eef li\u1ec7u  \n'})}),"\n",(0,i.jsx)(r.hr,{}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-sql",children:"-- =============================================\r\n-- MYSQL 5.7 CHEAT SHEET (H\u1eccC T\u1eacP)\r\n-- =============================================\r\n-- Author: B\u1ea1n\r\n-- Date: 2025\r\n-- Target: \xd4n t\u1eadp nhanh c\xe1c c\xe2u l\u1ec7nh c\u01a1 b\u1ea3n v\xe0 n\xe2ng cao MySQL 5.7\r\n-- =============================================\r\n\r\n-- ========================\r\n-- 1. K\u1ebeT N\u1ed0I & QU\u1ea2N L\xdd C\u01a0 S\u1ede D\u1eee LI\u1ec6U\r\n-- ========================\r\n\r\n-- K\u1ebft n\u1ed1i \u0111\u1ebfn MySQL (d\xf2ng l\u1ec7nh)\r\nmysql -u username -p\r\n\r\n-- Hi\u1ec3n th\u1ecb t\u1ea5t c\u1ea3 database\r\nSHOW DATABASES;\r\n\r\n-- T\u1ea1o database\r\nCREATE DATABASE mydb CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;\r\n\r\n-- X\xf3a database\r\nDROP DATABASE IF EXISTS mydb;\r\n\r\n-- S\u1eed d\u1ee5ng database\r\nUSE mydb;\r\n\r\n-- Xem database \u0111ang d\xf9ng\r\nSELECT DATABASE();\r\n\r\n-- Xem c\u1ea5u tr\xfac table hi\u1ec7n t\u1ea1i\r\nDESCRIBE tablename;\r\n-- Ho\u1eb7c\r\nSHOW CREATE TABLE tablename;\r\n\r\n-- ========================\r\n-- 2. QU\u1ea2N L\xdd B\u1ea2NG (TABLE)\r\n-- ========================\r\n\r\n-- T\u1ea1o b\u1ea3ng c\u01a1 b\u1ea3n\r\nCREATE TABLE users (\r\n    id INT AUTO_INCREMENT PRIMARY KEY,\r\n    username VARCHAR(50) NOT NULL UNIQUE,\r\n    email VARCHAR(100) NOT NULL UNIQUE,\r\n    age TINYINT UNSIGNED,\r\n    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\r\n    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\r\n    is_active BOOLEAN DEFAULT TRUE\r\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;\r\n\r\n-- Th\xeam c\u1ed9t\r\nALTER TABLE users ADD COLUMN phone VARCHAR(15);\r\n\r\n-- S\u1eeda c\u1ed9t\r\nALTER TABLE users MODIFY COLUMN phone VARCHAR(20);\r\n\r\n-- \u0110\u1ed5i t\xean c\u1ed9t\r\nALTER TABLE users CHANGE COLUMN phone mobile VARCHAR(20);\r\n\r\n-- X\xf3a c\u1ed9t\r\nALTER TABLE users DROP COLUMN mobile;\r\n\r\n-- \u0110\u1ed5i t\xean b\u1ea3ng\r\nRENAME TABLE users TO users_info;\r\n\r\n-- X\xf3a b\u1ea3ng\r\nDROP TABLE IF EXISTS users_info;\r\n\r\n-- Xem danh s\xe1ch table trong DB hi\u1ec7n t\u1ea1i\r\nSHOW TABLES;\r\n\r\n-- ========================\r\n-- 3. INSERT DATA\r\n-- ========================\r\n\r\n-- Ch\xe8n m\u1ed9t b\u1ea3n ghi\r\nINSERT INTO users (username, email, age) \r\nVALUES ('john_doe', 'john@example.com', 25);\r\n\r\n-- Ch\xe8n nhi\u1ec1u b\u1ea3n ghi\r\nINSERT INTO users (username, email, age) \r\nVALUES \r\n    ('alice', 'alice@x.com', 30),\r\n    ('bob', 'bob@y.com', 22),\r\n    ('charlie', 'charlie@z.com', 35);\r\n\r\n-- Ch\xe8n t\u1eeb truy v\u1ea5n kh\xe1c\r\nINSERT INTO users (username, email, age)\r\nSELECT name, email, age FROM temp_users WHERE age > 18;\r\n\r\n-- ========================\r\n-- 4. SELECT DATA (TRUY V\u1ea4N)\r\n-- ========================\r\n\r\n-- L\u1ea5y t\u1ea5t c\u1ea3 d\u1eef li\u1ec7u\r\nSELECT * FROM users;\r\n\r\n-- L\u1ea5y m\u1ed9t s\u1ed1 c\u1ed9t\r\nSELECT username, email, age FROM users;\r\n\r\n-- \u0110i\u1ec1u ki\u1ec7n WHERE\r\nSELECT * FROM users WHERE age > 25 AND is_active = TRUE;\r\n\r\n-- LIKE (t\xecm ki\u1ebfm m\u1eabu)\r\nSELECT * FROM users WHERE username LIKE '%john%';\r\n\r\n-- IN / NOT IN\r\nSELECT * FROM users WHERE age IN (25, 30, 35);\r\n\r\n-- BETWEEN\r\nSELECT * FROM users WHERE age BETWEEN 20 AND 30;\r\n\r\n-- ORDER BY\r\nSELECT * FROM users ORDER BY age DESC, username ASC;\r\n\r\n-- LIMIT (gi\u1edbi h\u1ea1n k\u1ebft qu\u1ea3)\r\nSELECT * FROM users ORDER BY id DESC LIMIT 5;\r\n\r\n-- OFFSET + LIMIT (ph\xe2n trang)\r\nSELECT * FROM users ORDER BY id LIMIT 10 OFFSET 20;\r\n\r\n-- DISTINCT (lo\u1ea1i b\u1ecf tr\xf9ng l\u1eb7p)\r\nSELECT DISTINCT age FROM users;\r\n\r\n-- GROUP BY + HAVING\r\nSELECT age, COUNT(*) as count \r\nFROM users \r\nWHERE age > 18 \r\nGROUP BY age \r\nHAVING count > 1 \r\nORDER BY count DESC;\r\n\r\n-- JOINs\r\n\r\n-- INNER JOIN\r\nSELECT u.username, o.order_id \r\nFROM users u \r\nINNER JOIN orders o ON u.id = o.user_id;\r\n\r\n-- LEFT JOIN\r\nSELECT u.username, o.order_id \r\nFROM users u \r\nLEFT JOIN orders o ON u.id = o.user_id;\r\n\r\n-- RIGHT JOIN (hi\u1ebfm d\xf9ng h\u01a1n)\r\nSELECT u.username, o.order_id \r\nFROM users u \r\nRIGHT JOIN orders o ON u.id = o.user_id;\r\n\r\n-- ========================\r\n-- 5. C\u1eacP NH\u1eacT & X\xd3A D\u1eee LI\u1ec6U\r\n-- ========================\r\n\r\n-- C\u1eadp nh\u1eadt d\u1eef li\u1ec7u\r\nUPDATE users \r\nSET age = 26, updated_at = NOW() \r\nWHERE username = 'john_doe';\r\n\r\n-- C\u1eadp nh\u1eadt nhi\u1ec1u \u0111i\u1ec1u ki\u1ec7n\r\nUPDATE users \r\nSET is_active = FALSE \r\nWHERE age < 18 OR email IS NULL;\r\n\r\n-- X\xf3a b\u1ea3n ghi\r\nDELETE FROM users WHERE id = 5;\r\n\r\n-- X\xf3a t\u1ea5t c\u1ea3 (c\u1ea9n th\u1eadn!)\r\nDELETE FROM users; -- Kh\xf4ng x\xf3a n\u1ebfu kh\xf4ng c\xf3 WHERE!\r\n\r\n-- X\xf3a t\u1ea5t c\u1ea3 + reset auto_increment\r\nTRUNCATE TABLE users;\r\n\r\n-- ========================\r\n-- 6. CH\u1ec8 M\u1ee4C (INDEXES)\r\n-- ========================\r\n\r\n-- T\u1ea1o ch\u1ec9 m\u1ee5c \u0111\u01a1n\r\nCREATE INDEX idx_username ON users (username);\r\n\r\n-- T\u1ea1o ch\u1ec9 m\u1ee5c \u0111a c\u1ed9t\r\nCREATE INDEX idx_email_age ON users (email, age);\r\n\r\n-- X\xf3a ch\u1ec9 m\u1ee5c\r\nDROP INDEX idx_username ON users;\r\n\r\n-- Xem ch\u1ec9 m\u1ee5c c\u1ee7a b\u1ea3ng\r\nSHOW INDEX FROM users;\r\n\r\n-- ========================\r\n-- 7. KH\xd3A NGO\u1ea0I & R\xc0NG BU\u1ed8C\r\n-- ========================\r\n\r\n-- T\u1ea1o kh\xf3a ngo\u1ea1i khi t\u1ea1o b\u1ea3ng\r\nCREATE TABLE orders (\r\n    id INT AUTO_INCREMENT PRIMARY KEY,\r\n    user_id INT,\r\n    amount DECIMAL(10,2),\r\n    FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE ON UPDATE CASCADE\r\n) ENGINE=InnoDB;\r\n\r\n-- Th\xeam kh\xf3a ngo\u1ea1i sau n\xe0y\r\nALTER TABLE orders \r\nADD CONSTRAINT fk_user_id \r\nFOREIGN KEY (user_id) REFERENCES users(id) ON DELETE SET NULL;\r\n\r\n-- X\xf3a kh\xf3a ngo\u1ea1i\r\nALTER TABLE orders DROP FOREIGN KEY fk_user_id;\r\n\r\n-- ========================\r\n-- 8. H\xc0M H\u1ed6 TR\u1ee2 TH\u01af\u1edcNG D\xd9NG\r\n-- ========================\r\n\r\n-- H\xe0m chu\u1ed7i\r\nSELECT UPPER(username), LOWER(email), LENGTH(username), SUBSTRING(email, 1, 5) FROM users;\r\n\r\n-- H\xe0m ng\xe0y th\xe1ng\r\nSELECT \r\n    CURDATE(),           -- Ng\xe0y hi\u1ec7n t\u1ea1i\r\n    CURTIME(),           -- Gi\u1edd hi\u1ec7n t\u1ea1i\r\n    NOW(),               -- Ng\xe0y gi\u1edd hi\u1ec7n t\u1ea1i\r\n    DATE_FORMAT(NOW(), '%Y-%m-%d %H:%i:%s') AS formatted,\r\n    DATEDIFF(NOW(), created_at) AS days_old\r\nFROM users;\r\n\r\n-- H\xe0m to\xe1n h\u1ecdc\r\nSELECT \r\n    ABS(-10),            -- Tr\u1ecb tuy\u1ec7t \u0111\u1ed1i\r\n    ROUND(3.14159, 2),   -- L\xe0m tr\xf2n\r\n    CEIL(3.1),           -- L\xe0m tr\xf2n l\xean\r\n    FLOOR(3.9),          -- L\xe0m tr\xf2n xu\u1ed1ng\r\n    RAND();              -- S\u1ed1 ng\u1eabu nhi\xean\r\n\r\n-- H\xe0m \u0111i\u1ec1u ki\u1ec7n\r\nSELECT \r\n    username,\r\n    CASE \r\n        WHEN age < 18 THEN 'Teen'\r\n        WHEN age BETWEEN 18 AND 30 THEN 'Young'\r\n        ELSE 'Adult'\r\n    END AS age_group\r\nFROM users;\r\n\r\n-- H\xe0m x\u1eed l\xfd NULL\r\nSELECT \r\n    COALESCE(phone, 'Ch\u01b0a c\xf3 s\u1ed1') AS contact,\r\n    IFNULL(email, 'Kh\xf4ng c\xf3 email') AS email_check\r\nFROM users;\r\n\r\n-- ========================\r\n-- 9. SAO L\u01afU & KH\xd4I PH\u1ee4C (BACKUP & RESTORE)\r\n-- ========================\r\n\r\n-- Sao l\u01b0u to\xe0n b\u1ed9 database\r\nmysqldump -u username -p mydb > mydb_backup.sql\r\n\r\n-- Sao l\u01b0u m\u1ed9t b\u1ea3ng\r\nmysqldump -u username -p mydb users > users_backup.sql\r\n\r\n-- Kh\xf4i ph\u1ee5c database\r\nmysql -u username -p mydb < mydb_backup.sql\r\n\r\n-- Kh\xf4i ph\u1ee5c v\xe0o database m\u1edbi\r\nmysql -u username -p newdb < mydb_backup.sql\r\n\r\n-- ========================\r\n-- 10. NG\u01af\u1edcI D\xd9NG & QUY\u1ec0N (USER & PRIVILEGES)\r\n-- ========================\r\n\r\n-- T\u1ea1o ng\u01b0\u1eddi d\xf9ng\r\nCREATE USER 'newuser'@'localhost' IDENTIFIED BY 'password123';\r\n\r\n-- C\u1ea5p quy\u1ec1n\r\nGRANT ALL PRIVILEGES ON mydb.* TO 'newuser'@'localhost';\r\n\r\n-- C\u1ea5p quy\u1ec1n c\u1ee5 th\u1ec3\r\nGRANT SELECT, INSERT, UPDATE ON mydb.users TO 'newuser'@'localhost';\r\n\r\n-- Xem quy\u1ec1n c\u1ee7a user\r\nSHOW GRANTS FOR 'newuser'@'localhost';\r\n\r\n-- Thu h\u1ed3i quy\u1ec1n\r\nREVOKE INSERT ON mydb.users FROM 'newuser'@'localhost';\r\n\r\n-- X\xf3a user\r\nDROP USER 'newuser'@'localhost';\r\n\r\n-- \u0110\u1ed5i m\u1eadt kh\u1ea9u\r\nALTER USER 'newuser'@'localhost' IDENTIFIED BY 'newpass456';\r\n\r\n-- ========================\r\n-- 11. M\u1eb8O & L\u01afU \xdd QUAN TR\u1eccNG (MYSQL 5.7)\r\n-- ========================\r\n\r\n-- \u2705 Lu\xf4n d\xf9ng `ENGINE=InnoDB` (h\u1ed7 tr\u1ee3 transaction, FK)\r\n-- \u2705 D\xf9ng `utf8mb4` thay v\xec `utf8` \u0111\u1ec3 h\u1ed7 tr\u1ee3 emoji\r\n-- \u2705 D\xf9ng `TIMESTAMP` t\u1ef1 \u0111\u1ed9ng c\u1eadp nh\u1eadt khi update\r\n-- \u2705 Tr\xe1nh `SELECT *` trong production \u2192 ch\u1ecdn c\u1ed9t c\u1ee5 th\u1ec3\r\n-- \u2705 D\xf9ng `EXPLAIN` \u0111\u1ec3 t\u1ed1i \u01b0u truy v\u1ea5n:\r\nEXPLAIN SELECT * FROM users WHERE username = 'john_doe';\r\n-- \u2705 Lu\xf4n ki\u1ec3m tra `sql_mode`:\r\nSELECT @@sql_mode;\r\n\r\n-- \u2705 T\u1eaft ch\u1ebf \u0111\u1ed9 safe update (n\u1ebfu c\u1ea7n):\r\nSET SQL_SAFE_UPDATES = 0;\r\n\r\n-- \u2705 Ki\u1ec3m tra phi\xean b\u1ea3n MySQL\r\nSELECT VERSION();\r\n\r\n-- \u2705 Xem tr\u1ea1ng th\xe1i server\r\nSHOW STATUS;\r\n\r\n-- \u2705 Xem bi\u1ebfn h\u1ec7 th\u1ed1ng\r\nSHOW VARIABLES LIKE 'max_connections';\r\n\r\n-- ========================\r\n-- \u2705 LUY\u1ec6N T\u1eacP: T\u1ef0 T\u1ea0O B\xc0I T\u1eacP NH\u1ece\r\n-- ========================\r\n\r\n-- T\u1ea1o 2 b\u1ea3ng: students & courses\r\n-- students: id, name, email, course_id\r\n-- courses: id, title, credits\r\n-- Ch\xe8n v\xe0i b\u1ea3n ghi\r\n-- Vi\u1ebft query: l\u1ea5y t\xean sinh vi\xean + t\xean kh\xf3a h\u1ecdc\r\n-- Vi\u1ebft query: \u0111\u1ebfm s\u1ed1 sinh vi\xean theo t\u1eebng kh\xf3a h\u1ecdc\r\n-- Vi\u1ebft query: t\xecm sinh vi\xean ch\u01b0a \u0111\u0103ng k\xfd kh\xf3a n\xe0o\r\n-- Vi\u1ebft query: c\u1eadp nh\u1eadt \u0111i\u1ec3m trung b\xecnh (th\xeam c\u1ed9t avg_score)\r\n\r\n-- \ud83d\udca1 G\u1ee3i \xfd: D\xf9ng `LEFT JOIN`, `GROUP BY`, `COUNT`, `CASE`\r\n\n"})})]})}function u(n={}){const{wrapper:r}={...(0,E.R)(),...n.components};return r?(0,i.jsx)(r,{...n,children:(0,i.jsx)(o,{...n})}):o(n)}},8453:(n,r,e)=>{e.d(r,{R:()=>h,x:()=>a});var t=e(6540);const i={},E=t.createContext(i);function h(n){const r=t.useContext(E);return t.useMemo(function(){return"function"==typeof n?n(r):{...r,...n}},[r,n])}function a(n){let r;return r=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:h(n.components),t.createElement(E.Provider,{value:r},n.children)}}}]);